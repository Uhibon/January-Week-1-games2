<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Booha Sentence Builder – January Week 1</title>
<meta name="theme-color" content="#0b1530" />
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700;900&family=Noto+Sans+JP:wght@500;700&display=swap" rel="stylesheet" />
<style>
:root{
  --bg:#0b1530; --ink:#fff; --outline:#ffffff26;
  --ok:#22c55e; --heart:#ff4fa6;
  --radius:26px;
}
*{box-sizing:border-box}
body{
  margin:0;background:#0b1530;color:var(--ink);
  font-family:system-ui,"Noto Sans JP",sans-serif;-webkit-overflow-scrolling:touch;
}
header{text-align:center;padding:24px 12px 10px}
.h1{font-family:'Cinzel',serif;font-weight:900;font-size:clamp(28px,6vw,44px);text-transform:uppercase;}
.h2,.h3,.h4{font-family:'Cinzel',serif;font-weight:900}
.h2{font-size:clamp(18px,4vw,24px)}
.h3{font-size:clamp(18px,4.5vw,26px);margin-top:6px}
.h4{font-weight:700;font-size:clamp(16px,3.8vw,20px);color:#cfe1ff}

.wrap{max-width:1100px;margin:0 auto;padding:8px 16px 80px}
.panel{padding:20px;border:1px solid var(--outline);border-radius:var(--radius);
  background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,.02));
  box-shadow:0 6px 24px rgba(0,0,0,.4);}
.jpCard{
  position:relative;border-radius:var(--radius);overflow:hidden;
  border:1px solid var(--outline);height:150px;margin-bottom:10px;
  display:flex;align-items:center;justify-content:center;
  background:repeating-linear-gradient(45deg,#ff6ec7 0 30px,#5ee6ff 30px 60px,#ffd166 60px 90px,#8aff80 90px 120px,#c77dff 120px 150px);
  background-size:600px 600px;animation:barber 20s linear infinite;
}
@keyframes barber{from{background-position:0 0}to{background-position:600px 600px}}
.jpText{
  position:relative;font-weight:900;font-size:clamp(24px,5vw,38px);
  color:#0b1530;text-align:center;text-shadow:0 1px 0 rgba(255,255,255,.6);
}
.hira{text-align:center;color:#d8e7ff;font-size:clamp(14px,3.5vw,18px);margin-bottom:20px}

/* areas */
.wordbank,.sentence{
  display:flex;flex-wrap:wrap;gap:10px;justify-content:center;
  min-height:60px;padding:10px;margin-bottom:12px;
}
.sentence{justify-content:flex-start;min-height:80px;border:1px dashed rgba(255,255,255,.25);border-radius:14px;padding:14px 10px}

/* chips */
.word{
  padding:14px 18px;font-weight:900;font-size:clamp(18px,4.2vw,26px);
  border:none;border-radius:20px;cursor:grab;user-select:none;
  box-shadow:0 0 0 4px var(--color),0 10px 22px rgba(0,0,0,.35);
  background:#fff;color:#06101f;text-shadow:0 1px 0 rgba(255,255,255,.65);
}
.word:active{transform:scale(.96)}
.btn{
  display:block;margin:20px auto;border:none;border-radius:999px;
  padding:16px 36px;font-weight:900;font-size:clamp(18px,4vw,22px);
  background:radial-gradient(circle at 30% 30%,#1ee99a,#15c473,#0ea85d);
  color:#00230f;text-shadow:0 1px 0 rgba(255,255,255,.5);
  box-shadow:0 0 0 5px rgba(34,197,94,.22),0 0 18px rgba(34,197,94,.8);
  cursor:pointer;
}

/* feedback */
.correctLine{text-align:left;color:#cfe1ff;font-weight:700;margin-top:8px;opacity:0;transition:.3s}
.correctLine.show{opacity:1}
.answer.shake{animation:shake .4s ease}
@keyframes shake{10%,90%{transform:translateX(-3px)}20%,80%{transform:translateX(3px)}30%,50%,70%{transform:translateX(-6px)}40%,60%{transform:translateX(6px)}}

/* FX */
.fx{position:fixed;inset:0;pointer-events:none;overflow:hidden}
.heart{
  position:absolute;color:var(--heart);font-size:clamp(50px,9vw,90px);
  text-shadow:0 4px 0 rgba(0,0,0,.35);
  animation:heartFly 1200ms ease-out forwards;
}
@keyframes heartFly{0%{opacity:0;transform:translate(-50%,-20px) scale(.6)}20%{opacity:1}100%{opacity:0;transform:translate(-50%,-240px) scale(1.5)}}
.smoke{
  position:absolute;width:clamp(60px,15vw,160px);height:clamp(60px,15vw,160px);
  border-radius:50%;background:radial-gradient(circle at 40% 40%,#fff,rgba(255,255,255,.7) 60%,rgba(255,255,255,0) 72%);
  animation:smokeRise 1600ms ease-out forwards;filter:blur(1px);
}
@keyframes smokeRise{0%{opacity:0;transform:translate(-50%,0) scale(.6)}20%{opacity:.9}100%{opacity:0;transform:translate(-50%,-260px) scale(1.4)}}
.end{text-align:center;padding:40px 10px 80px}
.end h2{font-family:'Cinzel',serif;font-size:clamp(26px,6vw,40px)}
.end .score{font-weight:900;font-size:clamp(20px,5vw,28px)}
footer{text-align:center;color:#c9d4ec;font-family:'Cinzel',serif;font-weight:700;padding:40px 10px}
</style>
</head>
<body>
<header>
  <div class="h1">THE BOO-RICULUM</div>
  <div class="h2">GAMES & QUIZZES</div>
  <div class="h3">January Week 1 – Sentences</div>
  <div class="h4">１月第１週 – 文の練習</div>
</header>

<div class="wrap">
  <div class="panel" id="panel">
    <div class="jpCard"><div id="jp" class="jpText"></div></div>
    <div id="hira" class="hira"></div>

    <div id="bank" class="wordbank"></div>
    <div id="sentence" class="sentence"></div>
    <div id="correctLine" class="correctLine"></div>

    <button id="checkBtn" class="btn">Check</button>
  </div>

  <div id="end" class="end" style="display:none">
    <h2>結果</h2>
    <div id="scoreText" class="score"></div>
    <div id="msg"></div>
  </div>
</div>

<div id="fx" class="fx"></div>
<footer>Bryan’s English School</footer>

<script>
const DATA=[
  {en:"I will study every day.",jp:"毎日勉強します。",hira:"まいにち べんきょう します"},
  {en:"I’m going to try something new.",jp:"新しいことに挑戦します。",hira:"あたらしい こと に ちょうせん します"},
  {en:"I will do my best this year.",jp:"今年は全力を尽くします。",hira:"ことし は ぜんりょく を つくし ます"},
  {en:"I will make a new friend.",jp:"新しい友だちを作ります。",hira:"あたらしい ともだち を つくり ます"},
  {en:"I will not be late anymore.",jp:"もう遅刻しません。",hira:"もう ちこく しません"},
  {en:"I will help my classmates.",jp:"クラスメイトを手伝います。",hira:"クラスメイト を てつだい ます"},
  {en:"I will clean my desk today.",jp:"今日は机を片づけます。",hira:"きょう は つくえ を かたづけ ます"},
  {en:"I will read more books.",jp:"もっと本を読みます。",hira:"もっと ほん を よみ ます"},
  {en:"I will start a good habit.",jp:"良い習慣を始めます。",hira:"よい しゅうかん を はじめ ます"},
  {en:"I will speak more English.",jp:"もっと英語を話します。",hira:"もっと えいご を はなし ます"},
  {en:"I will write in my diary every week.",jp:"毎週日記を書きます。",hira:"まいしゅう にっき を かき ます"},
  {en:"I will wake up earlier.",jp:"もっと早く起きます。",hira:"もっと はやく おき ます"},
  {en:"I will listen carefully in class.",jp:"授業でしっかり聞きます。",hira:"じゅぎょう で しっかり きき ます"},
  {en:"I will smile more.",jp:"もっと笑います。",hira:"もっと わらい ます"},
  {en:"I will enjoy learning.",jp:"学ぶことを楽しみます。",hira:"まなぶ こと を たのしみ ます"}
];
const SOK=new Audio("assets/audio/sugoi.mp3"),SBAD=new Audio("assets/audio/yada.mp3"),
SR0_5=new Audio("assets/audio/result_0-5.mp3"),SR6_10=new Audio("assets/audio/result_6-10.mp3"),
SR15=new Audio("assets/audio/result_15.mp3");
let order=shuffle([...DATA.keys()]);let i=0,score=0;
const jp=document.getElementById('jp'),hira=document.getElementById('hira'),
bank=document.getElementById('bank'),sent=document.getElementById('sentence'),
check=document.getElementById('checkBtn'),correctLine=document.getElementById('correctLine'),
fx=document.getElementById('fx'),end=document.getElementById('end'),
scoreText=document.getElementById('scoreText'),msg=document.getElementById('msg'),
panel=document.getElementById('panel');

function mount(){
  bank.innerHTML='';sent.innerHTML='';correctLine.textContent='';correctLine.classList.remove('show');
  const item=DATA[order[i]];jp.textContent=item.jp;hira.textContent=item.hira||'';
  const words=item.en.trim().split(/\s+/);shuffle(words).forEach((w,idx)=>{
    const b=document.createElement('button');b.textContent=w;b.className='word';b.style.setProperty('--color',chipColor(idx));
    b.draggable=true;b.addEventListener('dragstart',()=>b.classList.add('drag'));
    b.addEventListener('dragend',()=>b.classList.remove('drag'));
    bank.appendChild(b);
  });
}
function chipColor(n){const c=["#ff6ec7","#5ee6ff","#ffd166","#8aff80","#c77dff","#fff680","#ff9a8b","#9bffb7","#7cc6ff","#f7a6ff"];return c[n%c.length];}
function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}
['bank','sentence'].forEach(id=>{
 const area=document.getElementById(id);
 area.addEventListener('dragover',e=>e.preventDefault());
 area.addEventListener('drop',e=>{
   e.preventDefault();const drag=document.querySelector('.drag');if(!drag)return;
   if(area===bank){bank.appendChild(drag);}else{sent.appendChild(drag);}
 });
});
check.onclick=()=>{
 const item=DATA[order[i]];
 const built=[...sent.children].map(e=>e.textContent).join(' ').trim();
 const correct=item.en.trim();
 if(built===correct){
   score++;bigHearts(sent);SOK.currentTime=0;SOK.play();next();
 }else{
   correctLine.textContent="正解："+correct;correctLine.classList.add('show');
   hugeSmoke(sent);SBAD.currentTime=0;SBAD.play();next();
 }
};
function next(){setTimeout(()=>{i++;if(i>=DATA.length)return finish();mount();},1300);}
function finish(){
 panel.style.display='none';end.style.display='block';
 const pct=Math.round(score/DATA.length*100);
 scoreText.textContent=`スコア：${score}/${DATA.length}（${pct}%）`;
 let line="",s=null;
 if(score<=5){line="だめだ〜！アニメをやめて、ブーリキュラムを見よう！";s=SR0_5;}
 else if(score<=10){line="えっ？YouTubeばかり。Boo-tube を見よう！";s=SR6_10;}
 else if(score<=14){line="いいね！でも満点を目指そう。";s=SR15;}
 else{line="あなたは超天才！";s=SR15;}
 msg.textContent=line;if(s){s.currentTime=0;s.play();}
 bigHearts(document.body,100);
}
function bigHearts(el,count=60){
 const r=el.getBoundingClientRect();const x=r.left+r.width/2,y=r.top+r.height/2;
 for(let k=0;k<count;k++){const h=document.createElement('div');h.className='heart';h.textContent='❤';
   const dx=(Math.random()*window.innerWidth-window.innerWidth/2)*0.3;
   const dy=(Math.random()*200-100)*0.3;h.style.left=(x+dx)+'px';h.style.top=(y+dy)+'px';
   fx.appendChild(h);setTimeout(()=>h.remove(),1400);}
}
function hugeSmoke(el,count=30){
 const r=el.getBoundingClientRect();const x=r.left+r.width/2,y=r.top+r.height/2;
 for(let k=0;k<count;k++){const s=document.createElement('div');s.className='smoke';
   const a=(Math.random()*Math.PI)-Math.PI/2;const d=Math.random()*260;
   s.style.left=(x+Math.cos(a)*d)+'px';s.style.top=(y+Math.sin(a)*d*0.4)+'px';
   fx.appendChild(s);setTimeout(()=>s.remove(),1600);}
}
mount();
</script>
</body>
</html>
